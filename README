CARDPATH=/dev/sdd

cd dtc
make

cd u-boot-sunxi
export PATH=../dtc/:$PATH
make ARCH=arm -j6 CROSS_COMPILE=arm-linux-gnueabi- orangepi_pc_defconfig
make ARCH=arm -j6 CROSS_COMPILE=arm-linux-gnueabi-
# to run u-boot from sdcard:
dd if=u-boot-sunxi-with-spl.bin of=${CARDPATH} bs=1024 seek=8

cd buildroot/
ln -s ../configs/buldroot.config .config
make ARCH=arm -j6 CROSS_COMPILE=arm-linux-gnueabi-

# to create SD card automatically entering FEL mode:
cd prebuilt/
# wget https://github.com/linux-sunxi/sunxi-tools/raw/master/bin/fel-sdboot.sunxi
dd if=fel-sdboot.sunxi of=${CARDPATH} bs=1024 seek=8

# we need sunxi-fel tool to use FEL mode
cd sunxi-tools/
make

cd linux/
cp ../configs/kernel.config .config
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- oldconfig
make -j4 ARCH=arm CROSS_COMPILE=arm-linux-gnueabi- LOADADDR=0x40008000 uImage dtbs

